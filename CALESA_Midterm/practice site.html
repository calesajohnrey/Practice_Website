<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script src="./jquery.js" type="text/javascript"></script>
    <script
      src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
      integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="./random_tasker.css" />
    <title>Random Task Generator</title>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col first"></div>
        <div class="col second">
          <div id="taskList">
            <p class="fs-2 fw-bold">Task Today</p>
            <button class="btn btn-warning" id="button_generate">
              Generate Random Tasks
            </button>
            <input id="inputtedTask" />
            <button class="btn btn-success" id="btn_createList">Add</button>
            <ol id="fromGenerator"></ol>
            <ul class="ul_current"></ul>
          </div>
        </div>
      </div>
    </div>
    <script>
      const task = "https://jsonplaceholder.typicode.com/todos";

      fetch(task)
        .then((res) => {
          return res.json();
        })
        .then((data) => {
          for (let index = 0; index < 10; index++) {
            let limit = Math.floor(Math.random() * data.length);
            $("ol").append(
              "<li style='color:black'> " + data[limit].title + "</li>"
            );
          }
        })

        .catch(function (error) {
          console.log(error);
        });

      $(document).ready(function () {
        $("#button_generate").click(function () {
          $("ol li").remove();

          $.ajax({
            url: "https://jsonplaceholder.typicode.com/todos",
            datatype: "json",
            success: function (data) {
              for (let j = 0; j < 10; j++) {
                let n = Math.floor(Math.random() * data.length);
                $("ol").append("<li> " + data[n].title + "</li>");
              }
            },
          });
        });
      });

      $(document).on("dblclick", "ol li", function () {
        $(this).css("text-decoration", "line-through");
      });

      $(document).on("dblclick", "ul li", function () {
        $(this).css("text-decoration", "line-through");
      });

      $("#btn_createList").click(function () {
        if ($("#inputtedTask").val().length === 0) {
          alert("Please input a task!");
        } else {
          $("ul").append(
            $("<li>", {
              text: $("#inputtedTask").val(),
            })
          );
        }
      });
    </script>
  </body>
</html>
